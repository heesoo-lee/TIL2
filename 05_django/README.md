# 일종의 기획서를 작성한다. (aka. 알고리즘 수도코드)
"이미 정해져 있는 한가지"

1. 기술스택 - django, djangorestframework 사용
- 웹 개발 부분은 나중에 만들 데이터를 서비스 할 수 있는 방법 중 하나

- 무슨 서비스를 만들 것인가?
  1. 회원가입이 가능해야 하며, 회원만 접근 할 수 있는 기능이 있어야 한다.
  2. 게시글을 작성할 수 있어야 하고, 각 게시글들마다 댓글을 달 수 있어야 한다.
  3. 게시글은 유저만 작성할 수 있고,
  4. 유저는 다른 유저가 작성한 게시글을 찜하거나 추천 할 수 있어야 한다.
  5. extra. 유저 활동 기반 추천 알고리즘을 만든다. (하이라키컬, 가우시안 믹스쳐)
    - 이 부분이 우리의 몫
  
  - 모델을 정의한다.
    1. user model
      - django가 기본 제공하는 user model을 사용할 예정이다.
      - 필요에 따라서, user model을 커스터마이징 해야 할 수도 있다.
        - 회원가입 시점에 해당 정보를 수집할 수도 있어야 한다.

      | user | 유저 정보를 저장 |
      | --- |
      | id | 고유값 | PK | ...
      | django 기본 제공 필드 |
      | age | 나이 | int |
      | phone | 핸드폰 번호 | TEXT |

    2. article model
      - user model과 어떤 관계인가?
        1. 1:N 관계 (게시글 작성자 정보를 저장해야 함)
        2. M:N 관계 (여러 명의 유저가 여러 개의 게시글을 '좋아요' 할 수 있어야 함)
        | Article | 게시글 정보 저장 |
        | title | 제목 | CHAR(100) |
        | content | 내용 | TEXT |
        | user_id | 좋아요를 누른 유저 | FK |
        | article_id | 위의 user가 좋아요를 누른 게시글 | FK |
        | created_at | 작성일 | DATE? DATETIME? |
    
    3. comment model
    4. user-article M:N 관계 테이블
      - 누가 무엇과? 관계를 맺는가?
      - 1번 유저가 1번 게시글과 관계를 맞는다
      - 1번 유저가 2번 게시글과 관계를 맺는다
      - 2번 유저가 1번 게시글과도 관례를 맺을 수 있다.
  
기능 정리
1. 회원가입 요청 방법 -> 응답 방식
2. 로그인 요청 방법 -> 응답 방식
3. 프로필 요청 방법 -> 응답 방식
4. 게시글 작성 요청 방법 -> 응답 방식
4. 게시글 전체 조회 요청 방법 => 응답 방식
6. 게시글 수정, 삭제, 상세 조회 요청 방법 -> 응답 방식
7. ...

# 요청과 응답
- django에서는 (일반적인 웹 서비스에서는) 어떤 순으로 처리하는가?
1. 식별 (Client가 요청을 보낼 위치)
2. 행위 
3. 표현
- base domain - 'http://127.0.0.1:8000/'
| 기능 설명 | 행위 | 식별 | 표현 | 응답 방식 |
| 회원 가입 | POST | accounts/signup/ | dj-rest-auth | Token |

1. accounts 관련 기능 모음
  1. 회원 가입
    - 요청 방식 'POST accounts/signup/
      - 응답 데이터
        '''JSON
        {
          "token" : "dj-rest-auth가 반환한 토큰값"
        }
        ```
      - 구현 방식 : 'dj-rest-auth[with-social]' 활용한 registration

2. articles 관련 기능 모음
  1. 게시글 작성
    - 요청 방식 'POST articles/'
    - 응답 방식
    ```JSON
    {
      "title": "문자열",
      "content": "문자열",
      "created_at": "날짜, 시간",
      "createdAt": "날짜, 시간"
    }
    ```
  2. 게시글 상세 조회
    - 요청 방식 'GET articles/{article_id}/'
    - 응답 방식
    ```JSON
      {
        # 게시글이 가진 모든 필드?
        # 댓글에 대한 추가 정보도 보내줄 것이냐?
        "title"
        "content"
        "created_at"
        "comments": [
          {
            "id",
            "user_name",
            "content",
          }
        ]
      }
    ```

- 프로젝트 생성
1. 프로젝트 원격 저장소 및 초기 세팅
  - 깃헙, 깃랩은 어디고, 브랜치는 어떻게 할 것이고, 역할 분배

  ```bash
  # 명령어 정리
  $ python -m venv venv
  ```

-  django 프로젝트 생성
 1. 프로젝트 생성
 2. 앱 생성 및 등록
 3. 필요 라이브러리 설치 (기획 단계에서 설계한 대로 만들기 위해 필요한 패키지)

- 기능 코드 작성
  1. DRF의 authentication을 활용한 인증과 권한 서비스 설계
    - 해당 과정은 기능 설계 파트에서 이미 게시글 생성 요청은 인증이 필요하다고 설계한 상황에서 예정되어 있었을 것
    - 전역 설정을 무엇으로 할 것이며, 각 view 함수마다 어떻게 처리할 것인가?
      -> 이미 설계에 끝나있음
  2. 댓글 생성 기능 작성하기
    - 복붙 -> 모델을 Article로 바꾸기